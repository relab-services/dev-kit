(function(f,u){typeof exports=="object"&&typeof module<"u"?u(exports):typeof define=="function"&&define.amd?define(["exports"],u):(f=typeof globalThis<"u"?globalThis:f||self,u(f["@scalar/snippetz"]={}))})(this,function(f){"use strict";function u(a){return a.reduce((t,e)=>(t[e.name]=e.value,t),{})}function p(a){return/\s|-/.test(a)}function c(a,t=0){let e=[],r=" ".repeat(t),n=" ".repeat(t+2);for(const[h,i]of Object.entries(a)){let d=p(h)?`'${h}'`:h;if(Array.isArray(i)){const s=i.map(o=>typeof o=="string"?`'${o}'`:o&&typeof o=="object"?c(o,t+2):o).join(`, ${n}`);e.push(`${n}${d}: [${s}]`)}else if(i&&typeof i=="object")e.push(`${n}${d}: ${c(i,t+2)}`);else if(typeof i=="string"){let s=`${i}`;if(i.startsWith("JSON.stringify")){const o=i.split(`
`);o.length>1&&(s=o.map((l,v)=>v===0?l:`${n}${l}`).join(`
`))}else s=`'${i}'`;e.push(`${n}${d}: ${s}`)}else e.push(`${n}${d}: ${i}`)}return`{
${e.join(`,
`)}
${r}}`}function m(a){var d,s;const t={method:"GET",...a};t.method=t.method.toUpperCase();const e={method:t.method==="GET"?void 0:t.method},r=new URLSearchParams(t.queryString?u(t.queryString):void 0),n=r.size?`?${r.toString()}`:"";(d=t.headers)!=null&&d.length&&(e.headers={},t.headers.forEach(o=>{e.headers[o.name]=o.value})),(s=t.cookies)!=null&&s.length&&(e.headers=e.headers||{},t.cookies.forEach(o=>{e.headers["Set-Cookie"]=e.headers["Set-Cookie"]?`${e.headers["Set-Cookie"]}; ${o.name}=${o.value}`:`${o.name}=${o.value}`})),Object.keys(e).forEach(o=>{e[o]===void 0&&delete e[o]}),t.postData&&(e.body=t.postData.text,t.postData.mimeType==="application/json"&&(e.body=`JSON.stringify(${c(JSON.parse(e.body))})`));const h=Object.keys(e).length?`, ${c(e)}`:"";return{target:"node",client:"undici",code:`import { request } from 'undici'

const { statusCode, body } = await request('${t.url}${n}'${h})`}}function $(a){var d,s;const t={method:"GET",...a};t.method=t.method.toUpperCase();const e={method:t.method==="GET"?void 0:t.method},r=new URLSearchParams(t.queryString?u(t.queryString):void 0),n=r.size?`?${r.toString()}`:"";(d=t.headers)!=null&&d.length&&(e.headers={},t.headers.forEach(o=>{e.headers[o.name]=o.value})),(s=t.cookies)!=null&&s.length&&(e.headers=e.headers||{},t.cookies.forEach(o=>{e.headers["Set-Cookie"]=e.headers["Set-Cookie"]?`${e.headers["Set-Cookie"]}; ${o.name}=${o.value}`:`${o.name}=${o.value}`})),Object.keys(e).forEach(o=>{e[o]===void 0&&delete e[o]}),t.postData&&(e.body=t.postData.text,t.postData.mimeType==="application/json"&&(e.body=`JSON.stringify(${c(JSON.parse(e.body))})`));const h=Object.keys(e).length?`, ${c(e)}`:"";return{target:"node",client:"fetch",code:`fetch('${t.url}${n}'${h})`}}function y(a){var d,s;const t={method:"GET",...a};t.method=t.method.toUpperCase();const e={method:t.method==="GET"?void 0:t.method},r=new URLSearchParams(t.queryString?u(t.queryString):void 0),n=r.size?`?${r.toString()}`:"";(d=t.headers)!=null&&d.length&&(e.headers={},t.headers.forEach(o=>{e.headers[o.name]=o.value})),(s=t.cookies)!=null&&s.length&&(e.headers=e.headers||{},t.cookies.forEach(o=>{e.headers["Set-Cookie"]=e.headers["Set-Cookie"]?`${e.headers["Set-Cookie"]}; ${o.name}=${o.value}`:`${o.name}=${o.value}`})),Object.keys(e).forEach(o=>{e[o]===void 0&&delete e[o]}),t.postData&&(e.body=t.postData.text,t.postData.mimeType==="application/json"&&(e.body=`JSON.stringify(${c(JSON.parse(e.body))})`));const h=Object.keys(e).length?`, ${c(e)}`:"";return{target:"js",client:"fetch",code:`fetch('${t.url}${n}'${h})`}}function g(a){var i,d;const t={method:"GET",...a};t.method=t.method.toUpperCase();const e={method:t.method==="GET"?void 0:t.method},r=new URLSearchParams(t.queryString?u(t.queryString):void 0);r.size&&(e.query={},r.forEach((s,o)=>{e.query[o]=s})),(i=t.headers)!=null&&i.length&&(e.headers={},t.headers.forEach(s=>{e.headers[s.name]=s.value})),(d=t.cookies)!=null&&d.length&&(e.headers=e.headers||{},t.cookies.forEach(s=>{e.headers["Set-Cookie"]=e.headers["Set-Cookie"]?`${e.headers["Set-Cookie"]}; ${s.name}=${s.value}`:`${s.name}=${s.value}`})),Object.keys(e).forEach(s=>{e[s]===void 0&&delete e[s]}),t.postData&&(e.body=t.postData.text,t.postData.mimeType==="application/json"&&(e.body=JSON.parse(e.body)));const n=Object.keys(e).length?`, ${c(e)}`:"";return{target:"js",client:"ofetch",code:`ofetch('${t.url}'${n})`}}function S(a){var i,d;const t={method:"GET",...a};t.method=t.method.toUpperCase();const e={method:t.method==="GET"?void 0:t.method},r=new URLSearchParams(t.queryString?u(t.queryString):void 0);r.size&&(e.query={},r.forEach((s,o)=>{e.query[o]=s})),(i=t.headers)!=null&&i.length&&(e.headers={},t.headers.forEach(s=>{e.headers[s.name]=s.value})),(d=t.cookies)!=null&&d.length&&(e.headers=e.headers||{},t.cookies.forEach(s=>{e.headers["Set-Cookie"]=e.headers["Set-Cookie"]?`${e.headers["Set-Cookie"]}; ${s.name}=${s.value}`:`${s.name}=${s.value}`})),Object.keys(e).forEach(s=>{e[s]===void 0&&delete e[s]}),t.postData&&(e.body=t.postData.text,t.postData.mimeType==="application/json"&&(e.body=JSON.parse(e.body)));const n=Object.keys(e).length?`, ${c(e)}`:"";return{target:"node",client:"ofetch",code:`ofetch('${t.url}'${n})`}}function b(){const a=[m,$,y,g,S];return{get(t,e,r){const n=this.findPlugin(t,e);if(n)return n(r)},print(t,e,r){var n;return(n=this.get(t,e,r))==null?void 0:n.code},targets(){return a.map(t=>t().target).filter((t,e,r)=>r.indexOf(t)===e)},clients(){return a.map(t=>t().client)},plugins(){return a.map(t=>{const e=t();return{target:e.target,client:e.client}})},findPlugin(t,e){return a.find(r=>{const n=r();return n.target===t&&n.client===e})},hasPlugin(t,e){return!!this.findPlugin(t,e)}}}f.snippetz=b,Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})});
